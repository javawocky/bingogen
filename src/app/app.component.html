<div class="container">
  <div class="input-section">
    <h2>Bingo Card Generator</h2>
    <div class="item-input">
      <input type="text" [(ngModel)]="newItem" (keyup.enter)="addItem()" placeholder="Enter item text">
      <button (click)="addItem()">Add Item</button>
    </div>

    <div class="items-list">
      <h3>Current Items:</h3>

      <ul >
        <li *ngFor="let item of items; let i = index" >
          <ng-container *ngIf="editingIndex !== i; else editMode">
            <span (click)="startEditing(i, item)">{{ item }}</span>
            <button class="remove-btn" (click)="removeItem(i)">âœ•</button>
          </ng-container>
          <ng-template #editMode>
            <input type="text" 
                   [(ngModel)]="editingText" 
                   (keyup.enter)="saveEdit(i)"
                   (keyup.escape)="cancelEdit()"
                   (blur)="saveEdit(i)"
                   #editInput>
          </ng-template>
        </li>
      </ul>
    </div>
  </div>

  <div class="watermark-controls" *ngIf="items.length > 0">
    <div class="control-group">
      <label for="watermark">Watermark Image:</label>
      <input type="file" id="watermark" accept="image/*" (change)="onFileSelected($event)">
    </div>
    <div class="control-group" *ngIf="watermarkImage">
      <label for="opacity">Watermark Opacity:</label>
      <input type="range" id="opacity" min="0" max="1" step="0.1" [value]="watermarkOpacity" (input)="updateOpacity($event)">
    </div>
  </div>

  <div class="bingo-section" *ngIf="items.length > 0">
    <div id="bingo-card" class="bingo-card" [style.grid-template-columns]="'repeat(' + gridSize + ', 1fr)'">
      <div class="watermark" *ngIf="watermarkImage" [style.opacity]="watermarkOpacity">
        <img [src]="watermarkImage" alt="Watermark">
      </div>
      <div class="bingo-cell" *ngFor="let item of items">
        {{ item }}
      </div>
    </div>
    <button class="download-btn" (click)="downloadBingo()">Download Bingo Card</button>
  </div>
</div>